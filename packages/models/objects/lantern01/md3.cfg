shader 0 fire [
    @vpstart
    PARAM seconds = program.env[5];

    MAD result.texcoord[0], seconds, 0.67, vertex.texcoord[0];
    MAD result.texcoord[2], seconds, { -1.5, 1.5, 1, 1.5 }, vertex.texcoord[0];

    MOV result.color, vertex.color;

    @fogcoord
    END
] [
    @fpstart
    OPTION ARB_fog_linear;
    TEMP dtc, diffuse;

    TEX dtc, fragment.texcoord[0], texture[0], 2D;
    MAD dtc.xy, dtc, .1, fragment.texcoord[2];
    TEX diffuse, dtc, texture[0], 2D;

    MOV result.color.rgb, diffuse;
    MUL result.color.a, diffuse.a, fragment.color.a;

    END
]


md3load ./lantern01.md3
md3skin base ./base.jpg masks.jpg
md3skin fire ./fire.png
md3shader fire fire
md3fullbright fire 1
mdlambient 100
mdlspec 150
mdlglow 350
mdlcullface 0
mdlalphatest 0.3
md3anim mapmodel 0 7 4
