<html>
  <head>
    <title>cube &raquo; MD3 Guide</title>
    <link rel="stylesheet" href="static/style.css" type="text/css" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
<h1 id="toc0">md3 in Sauerbraten</h1>
<br />
<h2 id="toc1">Introduction</h2>
<br />
There are two different ways to use an md3 model in Sauerbraten:<br />
<br />
<h2 id="toc2">md3 without configuration</h2>
<br />
Go this way if your md3 has no animations (static) and takes only one texture. Your md3 files must be located in a directory in <em>packages/models</em>/.<br />
<br />
You must provide a skin (either <em>skin.jpg</em> or <em>skin.png</em>) and the md3 itself (<em>tris.md3</em>). Optionally you may provide a <em>masks.jpg</em> that holds a specmap in the R channel, a glowmap in the G channel, and a black B channel (future use). The engine will apply it automatically.<br />
<br />
If either of these files is not found, Sauerbraten will search the parent directory for them. For example, if for the <em>flags/red</em> model, the <em>tris.md3</em> is not found in <em>packages/models/flags/red</em>/, then it will look for <em>tris.md3</em> in <em>packages/models/flags</em>/. This allows the sharing of skins and geometry.<br />
<br />
<br />
<h2 id="toc3">md3 with configuration</h2>
<br />
You need to set up your md3 this way if it has animations, multiple skins, or if you want to make use of other configuration possibilities. You must place a <em>md3.cfg</em> text-file in a directory in <em>packages/models</em>/. This file specifies which models should be loaded, linked, etc.<br />
<br />
<h3 id="toc4">configuration commands</h3>
<br />
The following commands may be used in the <em>md3.cfg</em>:<br />
<br />
<a name="md3load"></a><br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">md3load model_path</pre>

This command loads the first part of your model. As example, this could be the <em>head.md3</em> of a playermodel. <em>name_path</em> is the path to the md3 file to load, its recursive to the location of the <em>md3.cfg</em>.<br />
<br />
<a name="md3skin"></a><br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">md3skin mesh skin_path masks_path</pre>

This loads a texture and assigns it to a mesh of the last loaded model (<em>md3load</em>). <em>mesh</em> is the name of the mesh you want to assign the texture to. <em>skin_path</em> is the path to the texture, its recursive to the location of the <em>md3.cfg</em>. The optional <em>masks_path</em> sets a texture for spec/glow maps as above.<br />
<br />
<a name="md3anim"></a><br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">md3anim anim frame numframes speed</pre>

This assigns a new animation to the last loaded model (<em>md3load</em>). <br />
<em>anim</em> is the name of the animation to define. Any of the following names may be used:<br />

<ul>
    <li>dying</li>
    <li>dead</li>
    <li>pain</li>
    <li>idle</li>
    <li>idle attack</li>
    <li>run</li>
    <li>run attack</li>
    <li>edit</li>
    <li>lag</li>
    <li>jump</li>
    <li>jump attack</li>
    <li>gun shoot</li>
    <li>gun idle</li>
    <li>mapmodel</li>
    <li>trigger</li>
</ul>

<br />
<em>frame</em> is the frame number the animation starts at.<br />
<em>numframes</em> is the number of frames in the animation.<br />
<em>speed</em> is the relative speed to run the animation at. This is optional and defaults to 100.<br />
<br />
Example: <br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">md3anim &quot;jump attack&quot; 131 6 15</pre>

Defines a <em>jump attack</em> animation starting at frame 131 with 6 frames and running at 15% speed.<br />
<br />
<a name="md3link"></a><br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">md3link parent child tag</pre>

This links two models together. Every model you load with <em>md3load</em> has an ID. The first model you load has the ID 0, the second has the ID 1, and so on. Those ID's are now used to identify the models and link them together.<br />
<em>parent</em> is the ID of the parent model.<br />
<em>child</em> is the ID of the child model.<br />
<em>tag</em> is the name of the tag that specifies at which vertex the models should be linked.<br />
<br />
Hint: Make sure you understand the difference between the parent and child model. Rendering starts at model 0 (first loaded model) and then continues with model 0's children, etc. Imagine a tree, model 0 is the root of it.<br />
<br />
<a name="mdlcullface"></a><br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">mdlcullface N</pre>

If <em>N</em> is 0, backface culling is disabled for this model. Otherwise, backface culling is enabled. Default = 1.<br />
<br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">mdlspec SI</pre>

<em>SI</em> is the specular intensity (not given or 0 gives the default of 100, good for metal/plastics and anything shiny, use lower values like 50 for wood etc, -1 means off entirely)<br />
<br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">mdlshader SH</pre>

<em>SH</em> is the name of the shader to use for rendering the model. Default is <em>stdmodel</em>.<br />
<br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">mdlambient A</pre>

<em>A</em> is the percent of the ambient light that should be used for shading. Not given or 0 gives the default of 30%, -1 means no ambient.<br />
<br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">mdlscale S</pre>

Scale the model's size to be <em>S</em> percent of its default size.<br />
<br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">mdltrans X Y Z</pre>

Translate the model's center by <em>X</em>,<em>Y</em> and <em>Z</em>, which are in model units (may use floating point).<br />
<br />
<h3 id="toc5">playermodels</h3>
<br />
There is a special thing you should know when dealing with playermodels: When loading a md3 playermodel, only the first two loaded parts of it will be animated. This means, the upper and lower part must be loaded before the rest (e.g. head).<br />
<br />
Sample <em>md3.cfg</em> file, used for a playermodel:<br />
<br />

<style type="text/css"><!--
/* GeSHi (c) Nigel McNie 2004 (http://qbnz.com/highlighter) */
.text .imp {font-weight: bold; color: red;}

-->
</style><pre class="text">md3load lower.md3 //model no. 0
md3skin l_lower default_l.png
&nbsp;
md3anim dying 0 30
md3anim dead 30 1
md3anim run 114 10
md3anim &quot;run attack&quot; 114 10
md3anim idle 164 30
md3anim &quot;idle attack&quot; 164 30 
md3anim jump 147 8
md3anim &quot;jump attack&quot; 147 8
&nbsp;
&nbsp;
md3load upper.md3// model no. 1
md3skin u_torso default.png
&nbsp;
md3anim dying 0 30
md3anim dead 30 1
md3anim lag 91 40
md3anim edit 91 40
md3anim &quot;idle attack&quot; 131 6
md3anim &quot;run attack&quot; 131 6
md3anim &quot;jump attack&quot; 131 6
md3anim jump 143 5
md3anim idle 152 1
md3anim run 152 1
md3anim pain 152 1
&nbsp;
&nbsp;
md3load head.md3 //model no. 2
md3skin h_head default_h.png
&nbsp;
&nbsp;
md3link 0 1 tag_torso
md3link 1 2 tag_head
&nbsp;
mdlspec 50
mdlscale 20 // 20 percent of the original size
mdltrans 0 0 -1.5 // lower the model a bit</pre>


    </div>
  </body>
</html>